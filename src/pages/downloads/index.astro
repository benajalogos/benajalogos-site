---
import BaseLayout from "@layouts/BaseLayout.astro";
---

<BaseLayout title="Downloads — Benaja Logos">

  <p class="back-link">
    <a href="/boeken">← Terug naar Boeken</a>
  </p>

  <h1>Downloads</h1>

   <p>
     Hier vind je gratis onderdelen van de boeken om meer inzicht te krijgen in de inhoud.
   </p>

    <p>
     Daarnaast zijn de volledige uitgaven hier tegen betaling beschikbaar.
   </p>



  <!-- Boeken -->

   <!-- Boek een reis door de Bijbel-->

  <div class="downloads-grid" style="margin-top:48px;">

    <div class="card">
  <h3>Een reis door de Bijbel</h3>

  <ul class="downloads-list">
    <li>
      <span>Voorwoord</span>
      <a href="/downloads/een-reis-door-de-bijbel/voorwoord.pdf">
        <span class="badge free">Gratis</span>
      </a>
    </li>

    <li>
      <span>Nawoord</span>
      <a href="/downloads/een-reis-door-de-bijbel/nawoord.pdf">
        <span class="badge free">Gratis</span>
      </a>
    </li>

    <li>
      <span>Inleidingen</span>
      <a href="/downloads/een-reis-door-de-bijbel/inleidingen.pdf">
        <span class="badge free">Gratis</span>
      </a>
    </li>

   <li>
      <span>Geheel boek voor € 30</span>

       <button
        id="buy-een-reis"
        class="badge paid"
        type="button"
        style="cursor:pointer;"
        >
        Koop nu
      </button>

      <script>
        (() => {
        const btn = document.getElementById("buy-een-reis");
        if (!(btn instanceof HTMLButtonElement)) return;

        btn.addEventListener("click", async () => {
        btn.disabled = true;
        btn.style.opacity = "0.8";
        btn.textContent = "Even wachten…";

        try {
          const res = await fetch("/api/create-checkout-session-een-reis", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
          });

          const data = await res.json();

          if (data?.url) {
            window.location.href = data.url;
            return;
          }

          alert("Fout bij starten betaling");
        } catch (e) {
          alert("Fout bij starten betaling");
        } finally {
          btn.disabled = false;
          btn.style.opacity = "1";
          btn.textContent = "Koop nu";
        }
        });
        })();
     </script>
    </li>

  </ul>
</div>

 <!-- Boek Het handboek voor leven-->


    <div class="card">
      <h3>Het handboek voor leven</h3>
      <ul class="downloads-list">
        <li>
  <span>Voorwoord</span>
  <a href="/downloads/het-handboek-voor-leven/voorwoord.pdf">
    <span class="badge free">Gratis</span>
  </a>
</li>

<li>
  <span>Nawoord</span>
  <a href="/downloads/het-handboek-voor-leven/nawoord.pdf">
    <span class="badge free">Gratis</span>
  </a>
</li>

<li>
  <span>Inleidingen</span>
  <a href="/downloads/het-handboek-voor-leven/inleidingen.pdf">
    <span class="badge free">Gratis</span>
  </a>
</li>

<li>
  <span>Geheel boek voor € 30</span>

  <button
    id="buy-handboek"
    class="badge paid"
    type="button"
    style="cursor:pointer;"
  >
    Koop nu
  </button>

  <script>
    (() => {
      const btn = document.getElementById("buy-handboek");
      if (!(btn instanceof HTMLButtonElement)) return;

      btn.addEventListener("click", async () => {
        btn.disabled = true;
        btn.style.opacity = "0.8";
        btn.textContent = "Even wachten…";

        try {
          const res = await fetch("/api/create-checkout-session-handboek", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
          });

          const data = await res.json();

          if (data?.url) {
            window.location.href = data.url;
            return;
          }

          alert("Fout bij starten betaling");
        } catch (e) {
          alert("Fout bij starten betaling");
        } finally {
          btn.disabled = false;
          btn.style.opacity = "1";
          btn.textContent = "Koop nu";
        }
      });
    })();
  </script>
</li>

      </ul>
    </div>

  </div>

  <!-- Korting op boeken -->

<div class="downloads-discount" style="margin-top:48px;">

  <div class="card" style="text-align:center;">
    <h3 style="margin-top:0;">Korting! Beide boeken voor €50</h3>

    <button
      id="buy-korting"
      class="badge paid"
      type="button"
      style="cursor:pointer;"
    >
      Koop nu
    </button>
  </div>

  <script>
    (() => {
      const btn = document.getElementById("buy-korting");
      if (!(btn instanceof HTMLButtonElement)) return;

      btn.addEventListener("click", async () => {
        btn.disabled = true;
        btn.style.opacity = "0.8";
        btn.textContent = "Even wachten…";

        try {
          const res = await fetch("/api/create-checkout-session-korting", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
          });

          const data = await res.json();

          if (data?.url) {
            window.location.href = data.url;
            return;
          }

          alert("Fout bij starten betaling");
        } catch (e) {
          alert("Fout bij starten betaling");
        } finally {
          btn.disabled = false;
          btn.style.opacity = "1";
          btn.textContent = "Koop nu";
        }
      });
    })();
  </script>

</div>

</BaseLayout>